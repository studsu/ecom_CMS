{% extends "base.html" %}

{% block title %}
    {% if selected_category %}{{ selected_category.name }} - {% endif %}
    {% if search_query %}Search: "{{ search_query }}" - {% endif %}
    Jewelry Collections - {{ SITE_NAME }}
{% endblock %}

{% block content %}
<div class="min-h-screen bg-gradient-to-br from-rose-25 via-white to-champagne-25">
    <!-- Elegant Header Section -->
    <div class="bg-gradient-to-r from-white via-rose-50 to-white border-b border-rose-100 relative overflow-hidden">
        <!-- Background decoration -->
        <div class="absolute inset-0 opacity-30">
            <svg class="w-full h-full" viewBox="0 0 100 100" preserveAspectRatio="none">
                <circle cx="85" cy="20" r="8" fill="url(#elegantGradient)" class="animate-float"/>
                <circle cx="15" cy="80" r="12" fill="url(#elegantGradient)" class="animate-float" style="animation-delay: -3s"/>
                <defs>
                    <radialGradient id="elegantGradient">
                        <stop offset="0%" style="stop-color:rgba(219, 39, 119, 0.1)"/>
                        <stop offset="100%" style="stop-color:rgba(245, 158, 11, 0.1)"/>
                    </radialGradient>
                </defs>
            </svg>
        </div>

        <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between">
                <div class="text-center lg:text-left">
                    <h1 class="text-4xl lg:text-5xl font-serif font-bold text-gray-900 mb-4">
                        {% if selected_category %}
                            <span class="bg-gradient-to-r from-primary-600 via-gold-500 to-rose-600 bg-clip-text text-transparent">{{ selected_category.name }}</span>
                        {% elif search_query %}
                            <span class="text-gray-700">Search Results</span>
                        {% else %}
                            <span class="bg-gradient-to-r from-primary-600 via-gold-500 to-rose-600 bg-clip-text text-transparent">All Collections</span>
                        {% endif %}
                    </h1>
                    <p class="text-lg lg:text-xl text-gray-600 font-elegant max-w-2xl">
                        {% if search_query %}
                            {{ total_products }} exquisite piece{{ total_products|pluralize }} found for "{{ search_query }}"
                        {% else %}
                            Discover our curated collection of {{ total_products }} exceptional jewelry piece{{ total_products|pluralize }}
                        {% endif %}
                    </p>
                </div>

                <!-- Elegant Search Bar -->
                <div class="mt-8 lg:mt-0 lg:ml-8">
                    <form method="GET" class="flex relative">
                        <div class="relative flex-1 lg:w-96">
                            <input type="search"
                                   name="search"
                                   value="{{ search_query }}"
                                   placeholder="Search luxury jewelry..."
                                   class="w-full px-6 py-4 border border-rose-200 rounded-full focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none bg-white/80 backdrop-blur-sm text-gray-700 placeholder-gray-500 font-elegant text-lg shadow-lg">
                            {% if selected_category %}
                                <input type="hidden" name="category" value="{{ selected_category.slug }}">
                            {% endif %}
                            <button type="submit" class="absolute right-2 top-1/2 transform -translate-y-1/2 bg-gradient-to-r from-primary-500 via-primary-600 to-rose-600 text-white p-3 rounded-full hover:from-primary-600 hover:via-primary-700 hover:to-rose-700 transition-all duration-300 hover:scale-110 shadow-lg">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                                </svg>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        <div class="lg:grid lg:grid-cols-4 lg:gap-12">
            <!-- Elegant Filters Sidebar -->
            <div class="lg:col-span-1">
                <div class="bg-white/80 backdrop-blur-lg rounded-3xl shadow-xl p-8 sticky top-8 border border-rose-100">
                    <h3 class="text-xl font-serif font-semibold text-gray-900 mb-8 border-b border-rose-100 pb-4">Refine Your Search</h3>

                    <form method="GET" id="filter-form">
                        {% if search_query %}
                            <input type="hidden" name="search" value="{{ search_query }}">
                        {% endif %}

                        <!-- Categories -->
                        <div class="mb-10">
                            <h4 class="text-lg font-serif font-medium text-gray-900 mb-6">Collections</h4>
                            <div class="space-y-4">
                                <label class="flex items-center group cursor-pointer">
                                    <input type="radio" name="category" value=""
                                           {% if not selected_category %}checked{% endif %}
                                           class="text-primary-600 focus:ring-primary-500 focus:ring-2">
                                    <span class="ml-4 text-gray-700 group-hover:text-primary-600 transition-colors duration-300 font-elegant">All Collections</span>
                                </label>
                                {% for category in categories %}
                                <label class="flex items-center group cursor-pointer">
                                    <input type="radio" name="category" value="{{ category.slug }}"
                                           {% if selected_category.slug == category.slug %}checked{% endif %}
                                           class="text-primary-600 focus:ring-primary-500 focus:ring-2">
                                    <span class="ml-4 text-gray-700 group-hover:text-primary-600 transition-colors duration-300 font-elegant">{{ category.name }}</span>
                                </label>
                                {% endfor %}
                            </div>
                        </div>

                        <!-- Price Range -->
                        <div class="mb-10">
                            <h4 class="text-lg font-serif font-medium text-gray-900 mb-6">Price Range</h4>
                            <div class="grid grid-cols-2 gap-4">
                                <div class="relative">
                                    <span class="absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 font-elegant">{{ CURRENCY_SYMBOL }}</span>
                                    <input type="number"
                                           name="min_price"
                                           value="{{ min_price }}"
                                           placeholder="Min"
                                           class="w-full pl-8 pr-4 py-3 border border-rose-200 rounded-2xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none bg-white/50 backdrop-blur-sm font-elegant">
                                </div>
                                <div class="relative">
                                    <span class="absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 font-elegant">{{ CURRENCY_SYMBOL }}</span>
                                    <input type="number"
                                           name="max_price"
                                           value="{{ max_price }}"
                                           placeholder="Max"
                                           class="w-full pl-8 pr-4 py-3 border border-rose-200 rounded-2xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none bg-white/50 backdrop-blur-sm font-elegant">
                                </div>
                            </div>
                        </div>

                        <!-- Sort -->
                        <div class="mb-10">
                            <h4 class="text-lg font-serif font-medium text-gray-900 mb-6">Sort By</h4>
                            <select name="sort" class="w-full px-4 py-3 border border-rose-200 rounded-2xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none bg-white/50 backdrop-blur-sm font-elegant">
                                <option value="newest" {% if current_sort == 'newest' %}selected{% endif %}>Newest Arrivals</option>
                                <option value="oldest" {% if current_sort == 'oldest' %}selected{% endif %}>Heritage Pieces</option>
                                <option value="name" {% if current_sort == 'name' %}selected{% endif %}>Name A-Z</option>
                                <option value="-name" {% if current_sort == '-name' %}selected{% endif %}>Name Z-A</option>
                                <option value="price" {% if current_sort == 'price' %}selected{% endif %}>Price: Low to High</option>
                                <option value="-price" {% if current_sort == '-price' %}selected{% endif %}>Price: High to Low</option>
                                <option value="featured" {% if current_sort == 'featured' %}selected{% endif %}>Featured</option>
                            </select>
                        </div>

                        <button type="submit" class="w-full bg-gradient-to-r from-primary-500 via-primary-600 to-rose-600 text-white py-4 rounded-full font-serif font-semibold text-lg hover:from-primary-600 hover:via-primary-700 hover:to-rose-700 transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl mb-4">
                            Apply Filters
                        </button>

                        <a href="{% url 'catalog:product_list' %}" class="w-full block text-center py-4 border-2 border-rose-200 rounded-full font-serif font-medium text-gray-700 bg-white/50 backdrop-blur-sm hover:bg-white hover:border-primary-300 hover:text-primary-600 transition-all duration-300">
                            Clear All Filters
                        </a>
                    </form>
                </div>
            </div>

            <!-- Luxury Products Grid -->
            <div class="lg:col-span-3 mt-12 lg:mt-0">
                {% if products %}
                    <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-10">
                        {% for product in products %}
                        <article class="group relative bg-white/90 backdrop-blur-lg rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 overflow-hidden border border-rose-100/50 hover:border-primary-200">
                            <!-- Product Image Section -->
                            <div class="relative overflow-hidden rounded-t-2xl">
                                <a href="{% url 'catalog:product_detail' product.slug %}" class="block">
                                    {% if product.image %}
                                        <img src="{{ product.image.url }}"
                                             alt="{{ product.title }}"
                                             class="w-full h-64 object-cover group-hover:scale-105 transition-transform duration-500">
                                    {% else %}
                                        <div class="w-full h-64 bg-gradient-to-br from-rose-100 via-champagne-50 to-gold-100 flex items-center justify-center">
                                            <svg class="w-16 h-16 text-primary-300" fill="currentColor" viewBox="0 0 24 24">
                                                <path d="M5 16L3 14l5.5-11h7L21 14l-2 2H5zm2.7-5h8.6l-1.5-3H8.2l-1.5 3zm1.8 3l2.5 2.5L14.5 14H7.5z"/>
                                            </svg>
                                        </div>
                                    {% endif %}
                                </a>

                                <!-- Status Badges -->
                                <div class="absolute top-3 left-3">
                                    {% if not product.is_in_stock %}
                                        <span class="bg-red-500 text-white px-3 py-1 rounded-full text-xs font-semibold uppercase tracking-wide">
                                            Sold Out
                                        </span>
                                    {% elif product.featured %}
                                        <span class="bg-gradient-to-r from-gold-500 to-gold-600 text-white px-3 py-1 rounded-full text-xs font-semibold uppercase tracking-wide">
                                            Featured
                                        </span>
                                    {% endif %}
                                </div>

                                <!-- Wishlist Button -->
                                {% if user.is_authenticated %}
                                <div class="absolute top-3 right-3">
                                    <button onclick="event.preventDefault(); event.stopPropagation(); addToWishlist({{ product.id }})"
                                            class="bg-white/90 backdrop-blur-sm text-gray-600 p-2 rounded-full hover:bg-white hover:text-rose-500 transition-all duration-300 opacity-0 group-hover:opacity-100 shadow-md">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>
                                        </svg>
                                    </button>
                                </div>
                                {% endif %}
                            </div>

                            <!-- Product Content -->
                            <div class="p-6">
                                <!-- Category -->
                                <div class="mb-2">
                                    <span class="text-xs text-primary-600 font-semibold uppercase tracking-wider">
                                        {{ product.category.name }}
                                    </span>
                                </div>

                                <!-- Title -->
                                <h3 class="font-serif font-semibold text-lg text-gray-900 mb-3 leading-tight">
                                    <a href="{% url 'catalog:product_detail' product.slug %}"
                                       class="hover:text-primary-600 transition-colors duration-300">
                                        {{ product.title|truncatechars:45 }}
                                    </a>
                                </h3>

                                <!-- Description -->
                                {% if product.short_description %}
                                <p class="text-gray-600 text-sm mb-4 leading-relaxed">
                                    {{ product.short_description|truncatewords:12 }}
                                </p>
                                {% endif %}

                                <!-- Rating -->
                                {% if product.get_review_count > 0 %}
                                <div class="flex items-center mb-4">
                                    <div class="flex text-gold-400">
                                        {% for i in "12345" %}
                                            {% if forloop.counter <= product.get_average_rating %}
                                                <svg class="w-3 h-3 fill-current" viewBox="0 0 20 20">
                                                    <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                                                </svg>
                                            {% else %}
                                                <svg class="w-3 h-3 text-gray-300 fill-current" viewBox="0 0 20 20">
                                                    <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                                                </svg>
                                            {% endif %}
                                        {% endfor %}
                                    </div>
                                    <span class="ml-2 text-xs text-gray-500">({{ product.get_review_count }})</span>
                                </div>
                                {% endif %}

                                <!-- Price Section -->
                                <div class="pt-3 border-t border-gray-100">
                                    <!-- Price -->
                                    <div class="flex items-baseline space-x-2 mb-3">
                                        {% if product.sale_price and product.sale_price < product.price %}
                                            <span class="text-xl font-bold text-primary-600 font-serif">
                                                {{ CURRENCY_SYMBOL }}{{ product.sale_price }}
                                            </span>
                                            <span class="text-sm text-gray-400 line-through">
                                                {{ CURRENCY_SYMBOL }}{{ product.price }}
                                            </span>
                                        {% else %}
                                            <span class="text-xl font-bold text-primary-600 font-serif">
                                                {{ CURRENCY_SYMBOL }}{{ product.price }}
                                            </span>
                                        {% endif %}
                                    </div>

                                    <!-- Add to Cart Button -->
                                    {% if product.is_in_stock %}
                                        <form method="post" action="{% url 'catalog:cart_add' product.id %}" class="w-full">
                                            {% csrf_token %}
                                            <input type="hidden" name="quantity" value="1">
                                            <button type="submit"
                                                    class="w-full bg-gradient-to-r from-primary-500 to-rose-500 text-white px-4 py-2.5 rounded-lg hover:from-primary-600 hover:to-rose-600 transition-all duration-300 font-medium text-sm shadow-md hover:shadow-lg transform hover:scale-105">
                                                <svg class="w-4 h-4 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5M17 18a2 2 0 11-4 0 2 2 0 014 0zM9 18a2 2 0 11-4 0 2 2 0 014 0z"/>
                                                </svg>
                                                Add to Cart
                                            </button>
                                        </form>
                                    {% else %}
                                        <button disabled class="w-full bg-gray-200 text-gray-500 px-4 py-2.5 rounded-lg cursor-not-allowed font-medium text-sm">
                                            Sold Out
                                        </button>
                                    {% endif %}
                                </div>
                            </div>
                        </article>
                        {% endfor %}
                    </div>

                    <!-- Elegant Pagination -->
                    {% if products.has_other_pages %}
                    <div class="mt-16 flex justify-center">
                        <nav class="flex items-center space-x-3">
                            {% if products.has_previous %}
                                <a href="?{% if search_query %}search={{ search_query }}&{% endif %}{% if selected_category %}category={{ selected_category.slug }}&{% endif %}{% if min_price %}min_price={{ min_price }}&{% endif %}{% if max_price %}max_price={{ max_price }}&{% endif %}{% if current_sort %}sort={{ current_sort }}&{% endif %}page={{ products.previous_page_number }}"
                                   class="px-6 py-3 border border-rose-200 rounded-full font-serif font-medium text-gray-700 bg-white/80 backdrop-blur-sm hover:bg-white hover:border-primary-300 hover:text-primary-600 transition-all duration-300 shadow-lg hover:shadow-xl">
                                    Previous
                                </a>
                            {% endif %}

                            {% for num in products.paginator.page_range %}
                                {% if products.number == num %}
                                    <span class="px-5 py-3 bg-gradient-to-r from-primary-500 via-primary-600 to-rose-600 text-white rounded-full font-serif font-medium shadow-lg">{{ num }}</span>
                                {% elif num > products.number|add:'-3' and num < products.number|add:'3' %}
                                    <a href="?{% if search_query %}search={{ search_query }}&{% endif %}{% if selected_category %}category={{ selected_category.slug }}&{% endif %}{% if min_price %}min_price={{ min_price }}&{% endif %}{% if max_price %}max_price={{ max_price }}&{% endif %}{% if current_sort %}sort={{ current_sort }}&{% endif %}page={{ num }}"
                                       class="px-5 py-3 border border-rose-200 rounded-full font-serif font-medium text-gray-700 bg-white/80 backdrop-blur-sm hover:bg-white hover:border-primary-300 hover:text-primary-600 transition-all duration-300 shadow-lg hover:shadow-xl">
                                        {{ num }}
                                    </a>
                                {% endif %}
                            {% endfor %}

                            {% if products.has_next %}
                                <a href="?{% if search_query %}search={{ search_query }}&{% endif %}{% if selected_category %}category={{ selected_category.slug }}&{% endif %}{% if min_price %}min_price={{ min_price }}&{% endif %}{% if max_price %}max_price={{ max_price }}&{% endif %}{% if current_sort %}sort={{ current_sort }}&{% endif %}page={{ products.next_page_number }}"
                                   class="px-6 py-3 border border-rose-200 rounded-full font-serif font-medium text-gray-700 bg-white/80 backdrop-blur-sm hover:bg-white hover:border-primary-300 hover:text-primary-600 transition-all duration-300 shadow-lg hover:shadow-xl">
                                    Next
                                </a>
                            {% endif %}
                        </nav>
                    </div>
                    {% endif %}

                {% else %}
                    <!-- Elegant No Products Found -->
                    <div class="text-center py-20">
                        <div class="mb-8">
                            <svg class="w-32 h-32 text-rose-300 mx-auto mb-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M5 16L3 14l5.5-11h7L21 14l-2 2H5zm2.7-5h8.6l-1.5-3H8.2l-1.5 3zm1.8 3l2.5 2.5L14.5 14H7.5z"/>
                            </svg>
                        </div>
                        <h3 class="text-2xl font-serif font-semibold text-gray-900 mb-4">No Jewelry Found</h3>
                        <p class="text-lg text-gray-600 mb-8 font-elegant max-w-md mx-auto">
                            {% if search_query %}
                                We couldn't find any jewelry pieces matching "{{ search_query }}"
                            {% else %}
                                No jewelry pieces are available in this collection at the moment
                            {% endif %}
                        </p>
                        <a href="{% url 'catalog:product_list' %}" class="inline-block bg-gradient-to-r from-primary-500 via-primary-600 to-rose-600 text-white px-8 py-4 rounded-full font-serif font-semibold text-lg hover:from-primary-600 hover:via-primary-700 hover:to-rose-700 transition-all duration-300 transform hover:scale-105 shadow-xl hover:shadow-2xl">
                            Browse All Collections
                        </a>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<script>
// Enhanced filter form with elegant animations
document.addEventListener('DOMContentLoaded', function() {
    const filterForm = document.getElementById('filter-form');
    const radioInputs = filterForm.querySelectorAll('input[type="radio"]');
    const selectInputs = filterForm.querySelectorAll('select');

    // Add elegant animations to form changes
    radioInputs.forEach(input => {
        input.addEventListener('change', () => {
            // Add a subtle loading effect
            const submitButton = filterForm.querySelector('button[type="submit"]');
            submitButton.innerHTML = '<div class="animate-spin h-5 w-5 border-2 border-white border-t-transparent rounded-full mx-auto"></div>';
            setTimeout(() => filterForm.submit(), 300);
        });
    });

    selectInputs.forEach(input => {
        input.addEventListener('change', () => {
            const submitButton = filterForm.querySelector('button[type="submit"]');
            submitButton.innerHTML = '<div class="animate-spin h-5 w-5 border-2 border-white border-t-transparent rounded-full mx-auto"></div>';
            setTimeout(() => filterForm.submit(), 300);
        });
    });

    // Add elegant hover effects to product cards
    const productCards = document.querySelectorAll('.group');
    productCards.forEach(card => {
        card.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-8px) scale(1.02)';
        });
        card.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0) scale(1)';
        });
    });

    // Add to Wishlist functionality
    window.addToWishlist = async function(productId) {
        try {
            const response = await fetch('{% url "wishlist:add_to_wishlist" %}', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'X-CSRFToken': getCookie('csrftoken')
                },
                body: JSON.stringify({
                    product_id: productId
                })
            });

            const data = await response.json();

            if (data.success) {
                // Update wishlist count in navigation
                const countElement = document.getElementById('wishlist-count');
                if (countElement) {
                    countElement.textContent = data.wishlist_count;
                }

                // Show success message
                showMessage(data.message, 'success');

                // Change wishlist button to show success
                const button = event.target.closest('button');
                if (button) {
                    const originalSvg = button.innerHTML;
                    button.innerHTML = '<svg class="w-5 h-5 text-green-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>';
                    button.disabled = true;
                    button.classList.add('text-green-500');

                    // Reset after 2 seconds
                    setTimeout(() => {
                        button.innerHTML = originalSvg;
                        button.disabled = false;
                        button.classList.remove('text-green-500');
                    }, 2000);
                }
            } else {
                showMessage(data.message, 'error');
            }
        } catch (error) {
            showMessage('Error adding to wishlist', 'error');
        }
    }

    // CSRF token helper
    function getCookie(name) {
        let cookieValue = null;
        if (document.cookie && document.cookie !== '') {
            const cookies = document.cookie.split(';');
            for (let i = 0; i < cookies.length; i++) {
                const cookie = cookies[i].trim();
                if (cookie.substring(0, name.length + 1) === (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }

    // Show message function
    function showMessage(message, type) {
        // Create a temporary message element
        const messageDiv = document.createElement('div');
        messageDiv.className = `fixed top-24 right-4 z-50 p-4 rounded-lg shadow-lg text-white ${type === 'success' ? 'bg-green-500' : 'bg-red-500'}`;
        messageDiv.textContent = message;

        document.body.appendChild(messageDiv);

        // Remove after 3 seconds
        setTimeout(() => {
            messageDiv.remove();
        }, 3000);
    }
});
</script>
{% endblock %}